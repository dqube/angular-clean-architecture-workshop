# Architecture 

Architecture is not a single discipline, nor is it only a structural artifact for the team. It involves all facets of design, planning, execution, and maintenance of software solutions. Therefore, it is a continual consideration for all project endeavors.

| Facet               | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| ------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Design and Planning | Any endeavor that includes development and ends with deployment requires proper design and planning appropriate to the context and significance of the item. This is mostly a thinking exercise that gathers enough information to know and understand the specific goal and objective before deciding on `how?` to do something. Design and planning should be deliberate with the objective of understanding and sharing through collaboration. The result of design and planning should be specific and within context - it needs to have an actionable outcome. |
| Tools and Materials | The selection of tools and materials is essential so that they align with the goals and design of the feature and/or system. Consider the tool/material capabilities and how they match to the capabilities of the actual developers. It is essential that each developer understand and to know how to use the tools effectively to support the design and plan.                                                                                                                                                                                                   |
| Execution           | The execution of architecture is the deliberate use of the *selected* tools and materials to deliver a solution that corresponds to the specifications of the design and plan. It requires that all developers and team members understand the overall goal and objective of the solution, the [scheme](scheme.md#scheme) or strategy, developer principles, and their tools/materials at a high-level.                                                                                                                                                             |



## Principles

It is much easier to learn and understand a few principles than memorize a large set of rigid rules that may or not be within context of the specific situation. There are many developer, software, and architectural principles to learn and follow. However, if you could only bring a few to a deserted island - Separation of Concerns and Single Responsibility have to be on the list.

### Separation of Concerns (SoC)

Most enterprise applications contain a set of concerns - and most of them happen in a well-defined sequence. Our application concerns will be implemented using a layered-architectural approach using the following layers. Each layer has a specific concern and set of responsibilities. Each layer provides access endpoints to consumers of the layer - this will primarily be Angular *services* that are injectable and participate in the Dependency Injection mechanism of Angular.

### Single Responsibility

The *thing* under consideration should do one thing and do it well. May include:

* encapsulation
* open-closed principle

### Inversion of Control

To improve application testability and manage dependencies effectively, Most if not all dependencies will be provided to a target using dependency injection. There are few or a couple of use-cases that allow for an object to initialize or create a new object for their use. Here are the foreseeable exceptions.

* initializing new Observables and Subject for streaming data
* initializing new data models
* initializing new business actions

## Angular Applications

We will use the Angular CLI and Angular Workspace to generate and manage new application projects. All application members should be contained within well-defined modules. The responsibility of the *AppModule* is to bootstrap the application and coordinate the loading of all required framework, 3rd-party, core, shared, and site modules.

Application configuration will make use of the our configuration cross-cutting concern library and the specific *environment* constants defined for the application.

## Angular Libraries

During the analysis and design of new features we should give consideration to how the target feature will be used. If the feature is a candidate for code sharing and reuse it should be implemented as a library project within the Angular workspace. The following list is a sample of the different types of library projects that fit well within the Angular Workspace and Architecture capabilities.


| Library                | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | Types                                                                                                                                                                                                                                             |
| ---------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| cross-cutting concerns | A *cross-cutting concern* library provides a feature that is not specific to a domain - but cross several boundaries.                                                                                                                                                                                                                                                                                                                                                                                       | Configuration, Logging, Exception Handling, HTTP Service                                                                                                                                                                                          |
| feature                | A *feature* library may implement a domain-feature. However, the feature is shared and reused by multiple applications.                                                                                                                                                                                                                                                                                                                                                                                     | Shopping Cart, Login, Password Management, Password Reset, etc.                                                                                                                                                                                   |
| components             | A *component* library provides a set of components that are not specific to a single domain or application. They may provide structural elements or they could be generic controls.                                                                                                                                                                                                                                                                                                                         | Generic/structural components like: panels, cards, banners, date pickers, text editors, pills, etc.                                                                                                                                               |
| foundational           | A *foundational* library will provide base classes and/or interfaces for specific Angular elements like Components and Services. The allow for using the Object Oriented capabilities of Typescript for inheritance, polymorphism, and encapsulation. They usually have common implementations that are shared by all instances of each class type.                                                                                                                                                         | Base classes for Components, Services, Business Actions and Business Providers                                                                                                                                                                    |
| core domain service    | A *core domain service* library implements the business logic and data access for a specific application domain. The entry-point is typically a service that the application will use within the application project. It provides a way to encapsulate the business logic and to create a distinct layer separate from the UI/Presentational layer. This library is a good candidate for code reuse when you have multiple applications and/or other domain service libraries to support a specific domain. | A single core domain service could be used by a consumer facing application, internal administrative application, and also a B2B application at the same time - a single source of truth for the implementation of the business logic.            |
| framework              | A *framework* library provides a mechanism and typically an API to implement customized solutions based on a single structure. Occasionally, these libraries may include some default implementations that will be common to most use cases.                                                                                                                                                                                                                                                                | The *business action* provides and algorithm to implement customized business logic in a consistent and testable manner. It takes advantage of a *rule engine* - which also another framework library to create simple or complex business rules. |
| micro-application      | A *micro-application* library is a full or more comprehensive implementation of feature(s). It will contain all of the UI/Presentational elements as well as the business logic implement. The entire library encapsulates an entire application part. The application is consumed by Angular application projects by lazy-loading the module. The micro-application is an *NgModule* that has all of its components and routes defined.                                                                    | Security, Shopping Cart, Admin Utilities                                                                                                                                                                                                          |

